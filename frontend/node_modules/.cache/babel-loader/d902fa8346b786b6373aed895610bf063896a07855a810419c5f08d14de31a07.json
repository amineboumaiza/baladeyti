{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport ErrorMsg from '../components/ErrorMsg.vue';\nimport UserLoginForm from './UserLoginForm.vue';\nexport default {\n  name: \"AddTicket\",\n  components: {\n    UserLoginForm,\n    ErrorMsg\n  },\n  data() {\n    return {\n      FormValues: {\n        idService: 0,\n        idMunicipalite: 0,\n        error: \"\"\n      },\n      selectedService: '',\n      selectedMunicipality: '',\n      selectedGovernorate: '',\n      governorates: [],\n      municipalities: [],\n      services: []\n    };\n  },\n  methods: {\n    //get all gouvernorats\n    async getGovernorates() {\n      try {\n        const response = await axios.get(\"http://localhost:8080/gouvernorat/all\");\n        this.governorates = response.data;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    //municipality by gouvernorat\n    getMunicipalities() {\n      if (this.selectedGovernorate) {\n        const url = `http://localhost:8080/municipalite/gouvernorat/id/${this.selectedGovernorate}`;\n        axios.get(url).then(response => {\n          this.municipalities = response.data;\n        }).catch(e => {\n          console.error(e);\n        });\n      } else {\n        this.municipalities = [];\n      }\n    },\n    async getServices() {\n      try {\n        const response = await axios.get(\"http://localhost:8080/service/all\");\n        this.services = response.data;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    async handleSubmit() {\n      try {\n        this.FormValues.idService = this.selectedService;\n        this.FormValues.idMunicipalite = this.selectedMunicipality;\n        const response = await axios.post(\"http://localhost:8080/tickets/reserve\", this.FormValues);\n        console.log(response);\n        this.$router.push({\n          name: \"TodayTickets\"\n        });\n      } catch (e) {\n        this.FormValues.error = \"Vous avez déjà reservé une ticket.\";\n      }\n    }\n  },\n  mounted() {\n    this.getGovernorates();\n    this.getServices();\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n    type_admin() {\n      return this.$store.state.type_admin;\n    },\n    type_emp() {\n      return this.$store.state.type_emp;\n    },\n    type_client() {\n      return this.$store.state.type_client;\n    }\n  }\n};","map":{"version":3,"names":["axios","ErrorMsg","UserLoginForm","name","components","data","FormValues","idService","idMunicipalite","error","selectedService","selectedMunicipality","selectedGovernorate","governorates","municipalities","services","methods","getGovernorates","response","get","e","console","log","getMunicipalities","url","then","catch","getServices","handleSubmit","post","$router","push","mounted","computed","user","$store","state","type_admin","type_emp","type_client"],"sources":["C:\\Users\\Ben Ali Sabeur\\Documents\\GitHub\\baladeyti\\frontend\\src\\views\\AddTicket.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n     <div v-if=\"!user\">\r\n      <UserLoginForm />\r\n    </div>\r\n   \r\n  <div class=\"col-md-10 container-fluid row\" v-if=\"type_client\">\r\n    <div class=\"col-md-6 div1 text-center\">\r\n      <br><br><br><br><br><br><br><br>\r\n      <span class=\"span1\">Bienvenue !</span><br>\r\n      <span class=\"span2\">Veuillez reserver une ticket ici</span>\r\n      <div>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"col-md-6 div2 text-center\">\r\n      <div class=\"container text-center\">\r\n        <br>\r\n      <h1>Réserver une ticket</h1> <br>\r\n      <form @submit.prevent=\"handleSubmit\" method=\"post\">\r\n        <div class=\"form-group\">\r\n           <select class=\"form-control\"\r\n           v-model=\"selectedGovernorate\" @change=\"getMunicipalities\">\r\n            <option value=\"\">Choisir votre gouvernot</option>\r\n            <option v-for=\"governorate in this.governorates\" :value=\"governorate.idGouvernorat\" :key=\"governorate.idGouvernorat\">\r\n              {{ governorate.name }}\r\n            </option>\r\n          </select><br>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <select class=\"form-control\" \r\n         v-model=\"selectedMunicipality\" @change=\"logging\">\r\n          <option value=\"\">Choisir votre municipalité</option>\r\n          <option v-for=\"municipality in this.municipalities\" :value=\"municipality.id \" :key=\"municipality.id\">\r\n            {{ municipality.nom }}\r\n          </option>\r\n        </select><br>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <select class=\"form-control\" \r\n         v-model=\"selectedService\" @change=\"logging\">\r\n          <option value=\"\">Choisir un service</option>\r\n          <option v-for=\"service in this.services\" :value=\"service.id \" :key=\"service.id \">\r\n            {{ service.nom }}\r\n          </option>\r\n        </select><br>\r\n        </div>\r\n        <ErrorMsg v-if=\"FormValues.error\" :error=\"FormValues.error\"/>\r\n        <button class=\"btn reserver\"> Reserver</button>\r\n      </form>\r\n    </div>\r\n    </div>\r\n  \r\n</div>\r\n\r\n\r\n</div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport ErrorMsg from '../components/ErrorMsg.vue'\r\nimport UserLoginForm from './UserLoginForm.vue'\r\n\r\nexport default {\r\n  name : \"AddTicket\",\r\n  components : {\r\n    UserLoginForm,\r\n     ErrorMsg \r\n  },\r\n  data() {\r\n    return {\r\n      FormValues:{\r\n        idService :0,\r\n        idMunicipalite :0,\r\n        error:\"\",\r\n            }, \r\n      selectedService:'',\r\n      selectedMunicipality: '',\r\n      selectedGovernorate: '',\r\n      governorates: [],\r\n      municipalities: [],\r\n      services : [],\r\n    };\r\n  },\r\n  methods: {\r\n     //get all gouvernorats\r\n     async getGovernorates() {\r\n     \r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/gouvernorat/all\");\r\n\r\n        \r\n        this.governorates = response.data;\r\n\r\n        }\r\n        catch(e){\r\n          console.log(e);\r\n        }\r\n    },\r\n    //municipality by gouvernorat\r\n    getMunicipalities() {\r\n       if (this.selectedGovernorate) {\r\n        \r\n      const url = `http://localhost:8080/municipalite/gouvernorat/id/${this.selectedGovernorate}`;\r\n\r\n      axios.get(url)\r\n        .then(response => {\r\n          \r\n          this.municipalities = response.data;\r\n        })\r\n        .catch(e => {\r\n          console.error(e);\r\n        });\r\n    } else {\r\n      this.municipalities = [];\r\n    }\r\n    },\r\n\r\n    async getServices() {\r\n      \r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/service/all\");\r\n\r\n        this.services = response.data;\r\n\r\n        }\r\n        catch(e){\r\n          console.log(e);\r\n        }\r\n    },\r\n\r\n\r\n\r\n     async handleSubmit(){\r\n        \r\n        try {\r\n\r\n        this.FormValues.idService = this.selectedService;\r\n        this.FormValues.idMunicipalite = this.selectedMunicipality;\r\n        \r\n        const response = await axios.post(\"http://localhost:8080/tickets/reserve\",this.FormValues);\r\n        \r\n        console.log(response);\r\n\r\n        this.$router.push({name : \"TodayTickets\"});\r\n        } \r\n        catch(e){\r\n          this.FormValues.error = \"Vous avez déjà reservé une ticket.\";\r\n        }\r\n      },\r\n\r\n  },\r\n  mounted() {\r\n    this.getGovernorates();\r\n    this.getServices();\r\n    \r\n  },\r\n   computed:{\r\n        user(){\r\n        return this.$store.state.user;\r\n      },\r\n\r\n      type_admin(){\r\n        return this.$store.state.type_admin;\r\n      },\r\n\r\n      type_emp(){\r\n        return this.$store.state.type_emp;\r\n      },\r\n\r\n      type_client(){\r\n        return this.$store.state.type_client;\r\n      },\r\n    },\r\n  \r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.container-fluid{\r\n    position: relative;\r\n    bottom: 120px;\r\n    left: 100px;\r\n    height: 380px;\r\n  }\r\n\r\n\r\n  .div1{\r\n      background-image: linear-gradient(-90deg,#c58efc, #9e3ffd);\r\n      border-top-left-radius: 15px;\r\n      border-bottom-left-radius: 15px;\r\n  }\r\n\r\n  .span1{\r\n    font-family: Century Gothic;\r\n    font-size: 45px;\r\n    font-weight: bolder;\r\n    color: white;\r\n    position: relative;\r\n    bottom: 50px;\r\n    justify-content: center;\r\n  }\r\n\r\n   .span2{\r\n    font-family: Century Gothic;\r\n    font-size: 16px;\r\n    color: white;\r\n    position: relative;\r\n    bottom: 40px;\r\n    text-align: center;\r\n    margin: 20px;\r\n  }\r\n\r\n  .div2{\r\n      \r\n      background-image: linear-gradient(90deg,#ffffff, #f8f8f8);\r\n      border-top-right-radius: 15px;\r\n      border-bottom-right-radius: 15px;\r\n  }\r\n\r\n  h1{\r\n    font-size: 35px;\r\n    font-family: Century Gothic;\r\n\r\n  }\r\n\r\n  .reserver{\r\n  border-color: #9e3ffd;\r\n  color:white;\r\n  background-color: #9e3ffd;\r\n  border-radius: 115px;\r\n  width: 153px;\r\n  height: 52px;\r\n  padding: 0.5rem 1rem;\r\n  font-size: 18px;\r\n  font-family: Century Gothic;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.reserver:hover{\r\n  border-color: #190131;\r\n  background-color: #190131;\r\n  color : white;\r\n  transition: 0.5s;\r\n}\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}