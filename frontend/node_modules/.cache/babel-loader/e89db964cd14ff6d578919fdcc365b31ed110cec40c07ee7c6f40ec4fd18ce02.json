{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createBlock as _createBlock, withModifiers as _withModifiers, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6bb6e87a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"col-md-10 container-fluid row\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-6 div1 text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"span1\"\n}, \"Bienvenue !\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"span2\"\n}, \"Veuillez reserver une ticket ici\"), /*#__PURE__*/_createElementVNode(\"div\")], -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"col-md-6 div2 text-center\"\n};\nconst _hoisted_5 = {\n  class: \"container text-center\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Réserver une ticket\", -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"Choisir votre gouvernot\", -1 /* HOISTED */));\nconst _hoisted_11 = [\"value\"];\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_13 = {\n  class: \"form-group\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"Choisir votre municipalité\", -1 /* HOISTED */));\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_17 = {\n  class: \"form-group\"\n};\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"Choisir un service\", -1 /* HOISTED */));\nconst _hoisted_19 = [\"value\"];\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn reserver\"\n}, \" Reserver\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UserLoginForm = _resolveComponent(\"UserLoginForm\");\n  const _component_ErrorMsg = _resolveComponent(\"ErrorMsg\");\n  return _openBlock(), _createElementBlock(\"div\", null, [!$options.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_UserLoginForm)])) : _createCommentVNode(\"v-if\", true), $options.type_client ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _hoisted_7, _createTextVNode(), _hoisted_8, _createElementVNode(\"form\", {\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.handleSubmit && $options.handleSubmit(...args), [\"prevent\"])),\n    method: \"post\"\n  }, [_createElementVNode(\"div\", _hoisted_9, [_withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedGovernorate = $event),\n    onChange: _cache[1] || (_cache[1] = (...args) => $options.getMunicipalities && $options.getMunicipalities(...args))\n  }, [_hoisted_10, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.governorates, governorate => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: governorate.idGouvernorat,\n      key: governorate.idGouvernorat\n    }, _toDisplayString(governorate.name), 9 /* TEXT, PROPS */, _hoisted_11);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelSelect, $data.selectedGovernorate]]), _hoisted_12]), _createElementVNode(\"div\", _hoisted_13, [_withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.selectedMunicipality = $event),\n    onChange: _cache[3] || (_cache[3] = (...args) => _ctx.logging && _ctx.logging(...args))\n  }, [_hoisted_14, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.municipalities, municipality => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: municipality.id,\n      key: municipality.id\n    }, _toDisplayString(municipality.nom), 9 /* TEXT, PROPS */, _hoisted_15);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelSelect, $data.selectedMunicipality]]), _hoisted_16]), _createElementVNode(\"div\", _hoisted_17, [_withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.selectedService = $event),\n    onChange: _cache[5] || (_cache[5] = (...args) => _ctx.logging && _ctx.logging(...args))\n  }, [_hoisted_18, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.services, service => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      value: service.id,\n      key: service.id\n    }, _toDisplayString(service.nom), 9 /* TEXT, PROPS */, _hoisted_19);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelSelect, $data.selectedService]]), _hoisted_20]), $data.FormValues.error ? (_openBlock(), _createBlock(_component_ErrorMsg, {\n    key: 0,\n    error: $data.FormValues.error\n  }, null, 8 /* PROPS */, [\"error\"])) : _createCommentVNode(\"v-if\", true), _hoisted_21], 32 /* HYDRATE_EVENTS */)])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","value","_createElementBlock","$options","user","_hoisted_1","_createVNode","_component_UserLoginForm","type_client","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","onSubmit","_cache","_withModifiers","args","handleSubmit","method","_hoisted_9","$data","selectedGovernorate","$event","onChange","getMunicipalities","_hoisted_10","_Fragment","_renderList","governorates","governorate","idGouvernorat","key","name","_hoisted_11","_hoisted_12","_hoisted_13","selectedMunicipality","_ctx","logging","_hoisted_14","municipalities","municipality","id","nom","_hoisted_15","_hoisted_16","_hoisted_17","selectedService","_hoisted_18","services","service","_hoisted_19","_hoisted_20","FormValues","error","_createBlock","_component_ErrorMsg","_hoisted_21"],"sources":["C:\\Users\\Ben Ali Sabeur\\Documents\\GitHub\\baladeyti\\frontend\\src\\views\\AddTicket.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n     <div v-if=\"!user\">\r\n      <UserLoginForm />\r\n    </div>\r\n   \r\n  <div class=\"col-md-10 container-fluid row\" v-if=\"type_client\">\r\n    <div class=\"col-md-6 div1 text-center\">\r\n      <br><br><br><br><br><br><br><br>\r\n      <span class=\"span1\">Bienvenue !</span><br>\r\n      <span class=\"span2\">Veuillez reserver une ticket ici</span>\r\n      <div>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"col-md-6 div2 text-center\">\r\n      <div class=\"container text-center\">\r\n        <br>\r\n      <h1>Réserver une ticket</h1> <br>\r\n      <form @submit.prevent=\"handleSubmit\" method=\"post\">\r\n        <div class=\"form-group\">\r\n           <select class=\"form-control\"\r\n           v-model=\"selectedGovernorate\" @change=\"getMunicipalities\">\r\n            <option value=\"\">Choisir votre gouvernot</option>\r\n            <option v-for=\"governorate in this.governorates\" :value=\"governorate.idGouvernorat\" :key=\"governorate.idGouvernorat\">\r\n              {{ governorate.name }}\r\n            </option>\r\n          </select><br>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <select class=\"form-control\" \r\n         v-model=\"selectedMunicipality\" @change=\"logging\">\r\n          <option value=\"\">Choisir votre municipalité</option>\r\n          <option v-for=\"municipality in this.municipalities\" :value=\"municipality.id \" :key=\"municipality.id\">\r\n            {{ municipality.nom }}\r\n          </option>\r\n        </select><br>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <select class=\"form-control\" \r\n         v-model=\"selectedService\" @change=\"logging\">\r\n          <option value=\"\">Choisir un service</option>\r\n          <option v-for=\"service in this.services\" :value=\"service.id \" :key=\"service.id \">\r\n            {{ service.nom }}\r\n          </option>\r\n        </select><br>\r\n        </div>\r\n        <ErrorMsg v-if=\"FormValues.error\" :error=\"FormValues.error\"/>\r\n        <button class=\"btn reserver\"> Reserver</button>\r\n      </form>\r\n    </div>\r\n    </div>\r\n  \r\n</div>\r\n\r\n\r\n</div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport ErrorMsg from '../components/ErrorMsg.vue'\r\nimport UserLoginForm from './UserLoginForm.vue'\r\n\r\nexport default {\r\n  name : \"AddTicket\",\r\n  components : {\r\n    UserLoginForm,\r\n     ErrorMsg \r\n  },\r\n  data() {\r\n    return {\r\n      FormValues:{\r\n        idService :0,\r\n        idMunicipalite :0,\r\n        error:\"\",\r\n            }, \r\n      selectedService:'',\r\n      selectedMunicipality: '',\r\n      selectedGovernorate: '',\r\n      governorates: [],\r\n      municipalities: [],\r\n      services : [],\r\n    };\r\n  },\r\n  methods: {\r\n     //get all gouvernorats\r\n     async getGovernorates() {\r\n     \r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/gouvernorat/all\");\r\n\r\n        \r\n        this.governorates = response.data;\r\n\r\n        }\r\n        catch(e){\r\n          console.log(e);\r\n        }\r\n    },\r\n    //municipality by gouvernorat\r\n    getMunicipalities() {\r\n       if (this.selectedGovernorate) {\r\n        \r\n      const url = `http://localhost:8080/municipalite/gouvernorat/id/${this.selectedGovernorate}`;\r\n\r\n      axios.get(url)\r\n        .then(response => {\r\n          \r\n          this.municipalities = response.data;\r\n        })\r\n        .catch(e => {\r\n          console.error(e);\r\n        });\r\n    } else {\r\n      this.municipalities = [];\r\n    }\r\n    },\r\n\r\n    async getServices() {\r\n      \r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/service/all\");\r\n\r\n        this.services = response.data;\r\n\r\n        }\r\n        catch(e){\r\n          console.log(e);\r\n        }\r\n    },\r\n\r\n\r\n\r\n     async handleSubmit(){\r\n        \r\n        try {\r\n\r\n        this.FormValues.idService = this.selectedService;\r\n        this.FormValues.idMunicipalite = this.selectedMunicipality;\r\n        \r\n        const response = await axios.post(\"http://localhost:8080/tickets/reserve\",this.FormValues);\r\n        \r\n        console.log(response);\r\n\r\n        this.$router.push({name : \"TodayTickets\"});\r\n        } \r\n        catch(e){\r\n          this.FormValues.error = \"Vous avez déjà reservé une ticket.\";\r\n        }\r\n      },\r\n\r\n  },\r\n  mounted() {\r\n    this.getGovernorates();\r\n    this.getServices();\r\n    \r\n  },\r\n   computed:{\r\n        user(){\r\n        return this.$store.state.user;\r\n      },\r\n\r\n      type_admin(){\r\n        return this.$store.state.type_admin;\r\n      },\r\n\r\n      type_emp(){\r\n        return this.$store.state.type_emp;\r\n      },\r\n\r\n      type_client(){\r\n        return this.$store.state.type_client;\r\n      },\r\n    },\r\n  \r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.container-fluid{\r\n    position: relative;\r\n    bottom: 120px;\r\n    left: 100px;\r\n    height: 380px;\r\n  }\r\n\r\n\r\n  .div1{\r\n      background-image: linear-gradient(-90deg,#c58efc, #9e3ffd);\r\n      border-top-left-radius: 15px;\r\n      border-bottom-left-radius: 15px;\r\n  }\r\n\r\n  .span1{\r\n    font-family: Century Gothic;\r\n    font-size: 45px;\r\n    font-weight: bolder;\r\n    color: white;\r\n    position: relative;\r\n    bottom: 50px;\r\n    justify-content: center;\r\n  }\r\n\r\n   .span2{\r\n    font-family: Century Gothic;\r\n    font-size: 16px;\r\n    color: white;\r\n    position: relative;\r\n    bottom: 40px;\r\n    text-align: center;\r\n    margin: 20px;\r\n  }\r\n\r\n  .div2{\r\n      \r\n      background-image: linear-gradient(90deg,#ffffff, #f8f8f8);\r\n      border-top-right-radius: 15px;\r\n      border-bottom-right-radius: 15px;\r\n  }\r\n\r\n  h1{\r\n    font-size: 35px;\r\n    font-family: Century Gothic;\r\n\r\n  }\r\n\r\n  .reserver{\r\n  border-color: #9e3ffd;\r\n  color:white;\r\n  background-color: #9e3ffd;\r\n  border-radius: 115px;\r\n  width: 153px;\r\n  height: 52px;\r\n  padding: 0.5rem 1rem;\r\n  font-size: 18px;\r\n  font-family: Century Gothic;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.reserver:hover{\r\n  border-color: #190131;\r\n  background-color: #190131;\r\n  color : white;\r\n  transition: 0.5s;\r\n}\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}